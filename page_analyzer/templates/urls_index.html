{% extends "layout.html" %}

{% block title %}Сайты{% endblock %}

{% block content %}
  <h2 class="mt-5 mb-3">Сайты</h2>

  <table class="table table-hover" data-test="urls">
    <thead>
      <tr>
        <th>ID</th>
        <th>Имя</th>
        <th>Последняя проверка</th>
        <th>Код ответа</th> {# Новый заголовок #}
      </tr>
    </thead>
    <tbody>
      {# url_item теперь кортеж (id, name, last_check_date, last_check_status_code) #}
      {% for url_item in urls %}
      <tr>
        <td>{{ url_item[0] }}</td> {# ID #}
        <td><a href="{{ url_for('show_url', id=url_item[0]) }}">{{ url_item[1] }}</a></td> {# Имя #}
        <td>
            {# Выводим дату последней проверки, если она есть #}
            {% if url_item[2] %}
              {{ url_item[2].strftime('%Y-%m-%d') }} {# last_check_date #}
            {% endif %}
        </td>
        <td>
            {# Выводим код ответа последней проверки, если он есть #}
            {% if url_item[3] is not none %} {# Проверяем, что значение не NULL #}
              {{ url_item[3] }} {# last_check_status_code #}
            {% endif %}
        </td>
      </tr>
      {% else %}
      <tr>
        <td colspan="4">Пока не добавлено ни одного сайта</td> {# Увеличили colspan до 4 #}
      </tr>
      {% endfor %}
    </tbody>
  </table>
{% endblock %}